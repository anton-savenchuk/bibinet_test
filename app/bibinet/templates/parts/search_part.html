{% extends "base.html" %}
{% block title %}BIBINET Parts - {{ title }}{% endblock%}

{% block content %}
<div class="container">
    <h1 class="mt-5">{{ title }}</h1>

    <form method="get" action="{% url 'search_part' %}">
        <div class="mb-3">
            <div class="row">
                <div class="col-md-3">
                    <label for="markName" class="form-label">Марка автомобиля</label>
                    <input type="text" class="form-control" id="markName" name="mark_name"
                        placeholder="Марка автомобиля" value="{{ search_data.mark_name }}">
                </div>
                <div class="col-md-3">
                    <label for="partName" class="form-label">Название запчасти</label>
                    <input type="text" class="form-control" id="partName" name="part_name"
                        placeholder="Название запчасти" value="{{ search_data.part_name }}">
                </div>
                <div class="col-md-3">
                    <label for="color" class="form-label">Цвет</label>
                    <input type="text" class="form-control" id="color" name="color" placeholder="Цвет"
                        value="{{ search_data.color }}">
                </div>
                <div class="col-md-3">
                    <label for="priceGte" class="form-label">Стоимость запчасти, мин.</label>
                    <input type="number" class="form-control" id="priceGte" name="price_gte"
                        placeholder="Минимальная стоимость" value="{{ search_data.price_gte }}">
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-3">
                    <label for="priceLte" class="form-label">Стоимость запчасти, макс</label>
                    <input type="number" class="form-control" id="priceLte" name="price_lte"
                        placeholder="Максимальная стоимость" value="{{ search_data.price_lte }}">
                </div>
                <div class="col-md-3">
                    <label for="isNewPart" class="form-label">Новая запчасть</label>
                    <select class="form-select" id="isNewPart" name="is_new_part">
                        <option value="" {% if not search_data.is_new_part %}selected{% endif %}>Любая</option>
                        <option value="true" {% if search_data.is_new_part == 'true' %}selected{% endif %}>Да</option>
                        <option value="false" {% if search_data.is_new_part == 'false' %}selected{% endif %}>Нет</option>
                    </select>
                </div>
                <div class="col-md-3 align-self-end">
                    <button type="submit" class="btn btn-primary">Найти</button>
                </div>
            </div>
        </div>
    </form>

    {% if parts %}
    <div id="searchResults">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Марка автомобиля</th>
                    <th>Модель автомобиля</th>
                    <th>Название запчасти</th>
                    <th>Цвет</th>
                    <th>Новая</th>
                    <th>Стоимость запчасти</th>
                </tr>
            </thead>
            <tbody>
                {% for part in parts %}
                <tr>
                    <td>{{ part.id }}</td>
                    <td>{{ part.mark.name }}</td>
                    <td>{{ part.model.name }}</td>
                    <td>{{ part.name }}</td>
                    <td>{{ part.json_data.color }}</td>
                    <td>{{ part.json_data.is_new_part }}</td>
                    <td>{{ part.price }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>Ничего не удалось найти.</p>
    {% endif %}
</div>
{% endblock %}